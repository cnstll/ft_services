apiVersion: v1
kind: ConfigMap
metadata:
  name: grafana-config
  namespace: ft-services
data:
  datasources.yaml: |
    apiVersion: 1
    datasources:
    - name: Analysis Server
      orgId: 1
      type: influxdb
      access: proxy
      url: "http://$INFLUXDB_HOST:8086"
      database: $INFLUXDB_DB
      isDefault: false
      version: 1
      editable: false
      basicAuth: true
      basicAuthUser: $INFLUXDB_MONITORING_USER
      basicAuthPassword: $INFLUXDB_MONITORING_PASSWORD
  providers.yaml: |
    apiVersion: 1
    providers:
    - name: 'dashboards'
      orgId: 1
      folder: ''
      type: file
      disableDeletion: false
      updateIntervalSeconds: 10 #how often Grafana will scan for changed dashboards
      options:
        path: /usr/share/grafana/dashboards
